(function(){"use strict";var o={2368:function(o,t,n){var e=n(5130),r=n(6768);const a={class:"map-container"},i={ref:"map",class:"map"};function s(o,t,n,e,s,u){return(0,r.uX)(),(0,r.CE)("div",a,[(0,r.Lk)("div",i,null,512)])}var u=n(6886),l=n.n(u),c=n(4373),p=n.p+"img/volcan.63713fbe.png",d=n.p+"img/volcan_eruption.b8beb67e.png",h={name:"MapComponent",mounted(){this.initMap(),this.loadVolcanoes()},methods:{initMap(){this.map=l().map(this.$refs.map).setView([0,0],4),l().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map)},async loadVolcanoes(){try{const o=await c.A.get("/api/volcanoes/"),t=o.data;t.forEach((o=>{const t=this.getMarkerIcon(o.eruption_time),n=l().marker([o.latitude,o.longitude],{icon:t}).addTo(this.map).bindPopup(this.createPopupContent(o));n.on("click",(()=>this.addToFavorites(o.id)))}))}catch(o){console.error("Error loading volcanoes:",o)}},createPopupContent(o){let t=`\n        <b>${o.name}</b><br>\n        Location: ${o.location}<br>\n        Country: ${o.country}<br>\n        Height: ${o.height} meters<br>\n        Next Eruption: ${this.formatTimeToEruption(o.eruption_time)}\n      `;return this.isAuthenticated&&(t+=`<br><button onclick="addToFavorites(${o.id})">Add to Favorites</button>`),t},formatTimeToEruption(o){const t=60,n=60*t,e=24*n,r=30*e,a=12*r;let i=o;const s=Math.floor(i/a);i%=a;const u=Math.floor(i/r);i%=r;const l=Math.floor(i/e);i%=e;const c=Math.floor(i/n);i%=n;const p=Math.floor(i/t),d=i%t;return`${s} years, ${u} months, ${l} days, ${c} hours, ${p} minutes, ${d} seconds`},getMarkerIcon(o){const t=2592e3;return o<t?l().icon({iconUrl:d,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]}):l().icon({iconUrl:p,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]})},async addToFavorites(o){try{const t=await c.A.post("/api/volcanoes/favorite/",{volcano_id:o});console.log("Volcano added to favorites:",t.data)}catch(t){console.error("Error adding volcano to favorites:",t)}}}},m=n(1241);const f=(0,m.A)(h,[["render",s],["__scopeId","data-v-437fb3ca"]]);var g=f;const v={id:"app"};var b={__name:"App",setup(o){return(o,t)=>{const n=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",v,[(0,r.bF)(n,{to:"/login"},{default:(0,r.k6)((()=>[(0,r.eW)("Go to Login")])),_:1}),(0,r.bF)(g)])}}};const k=b;var y=k,L=n(1387);n(4114);const w=(0,r.Lk)("h1",null,"Welcome to Map View",-1);var _={__name:"MapView",setup(o){const t=(0,L.rd)(),n=()=>{t.push("/register")},e=()=>{t.push("/login")};return(o,t)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",null,[(0,r.Lk)("button",{onClick:n},"Register"),(0,r.Lk)("button",{onClick:e},"Go to Login")]),(0,r.Lk)("div",null,[w,(0,r.bF)(g)])],64))}};const A=_;var C=A;const E=(0,r.Lk)("h2",null,"Register",-1),M=(0,r.Lk)("button",{type:"submit"},"Register",-1);function $(o,t,n,a,i,s){return(0,r.uX)(),(0,r.CE)("div",null,[E,(0,r.Lk)("form",{onSubmit:t[3]||(t[3]=(0,e.D$)(((...o)=>s.register&&s.register(...o)),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.username=o),placeholder:"Username",required:""},null,512),[[e.Jo,i.username]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>i.email=o),placeholder:"Email",type:"email",required:""},null,512),[[e.Jo,i.email]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>i.password=o),placeholder:"Password",type:"password",required:""},null,512),[[e.Jo,i.password]]),M],32)])}var O={data(){return{username:"",email:"",password:""}},methods:{async register(){try{const o=await c.A.post("http://localhost:8000/api/auth/users/",{username:this.username,email:this.email,password:this.password});console.log("User registered:",o.data)}catch(o){console.error("Registration error:",o)}}}};const T=(0,m.A)(O,[["render",$]]);var V=T;const F=(0,r.Lk)("h1",null,"Registration Page",-1);var S={__name:"RegisterView",setup(o){const t=(0,L.rd)(),n=()=>{t.push("/map")},e=()=>{t.push("/login")};return(o,t)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",null,[F,(0,r.bF)(V)]),(0,r.Lk)("div",null,[(0,r.Lk)("button",{onClick:n},"Go to Map"),(0,r.Lk)("button",{onClick:e},"Go to Login")])],64))}};const U=S;var P=U;const j=(0,r.Lk)("h2",null,"Login",-1),x=(0,r.Lk)("button",{type:"submit"},"Login",-1);function R(o,t,n,a,i,s){return(0,r.uX)(),(0,r.CE)("div",null,[j,(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,e.D$)(((...o)=>s.login&&s.login(...o)),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.username=o),placeholder:"Username",required:""},null,512),[[e.Jo,i.username]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>i.password=o),placeholder:"Password",type:"password",required:""},null,512),[[e.Jo,i.password]]),x],32)])}var X={data(){return{username:"",password:""}},methods:{async login(){try{const o=await c.A.post("http://localhost:8000/api/auth/token/login/",{username:this.username,password:this.password}),t=o.data.auth_token;localStorage.setItem("auth_token",t),console.log("User logged in:",t)}catch(o){console.error("Login error:",o)}}}};const q=(0,m.A)(X,[["render",R]]);var I=q;const J=(0,r.Lk)("h1",null,"Login",-1);var z={__name:"LoginView",setup(o){return(o,t)=>((0,r.uX)(),(0,r.CE)("div",null,[J,(0,r.bF)(I)]))}};const G=z;var D=G;c.A.defaults.baseURL="http://localhost:8000";const K=[{path:"/register",component:P},{path:"/login",component:D},{path:"/",component:C}],W=(0,L.aE)({history:(0,L.LA)(),routes:K}),H=localStorage.getItem("auth_token");H&&(c.A.defaults.headers.common["Authorization"]=`Token ${H}`);const N=(0,e.Ef)(y);N.use(W),N.mount("#app")}},t={};function n(e){var r=t[e];if(void 0!==r)return r.exports;var a=t[e]={exports:{}};return o[e].call(a.exports,a,a.exports,n),a.exports}n.m=o,function(){var o=[];n.O=function(t,e,r,a){if(!e){var i=1/0;for(c=0;c<o.length;c++){e=o[c][0],r=o[c][1],a=o[c][2];for(var s=!0,u=0;u<e.length;u++)(!1&a||i>=a)&&Object.keys(n.O).every((function(o){return n.O[o](e[u])}))?e.splice(u--,1):(s=!1,a<i&&(i=a));if(s){o.splice(c--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=o.length;c>0&&o[c-1][2]>a;c--)o[c]=o[c-1];o[c]=[e,r,a]}}(),function(){n.n=function(o){var t=o&&o.__esModule?function(){return o["default"]}:function(){return o};return n.d(t,{a:t}),t}}(),function(){n.d=function(o,t){for(var e in t)n.o(t,e)&&!n.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:t[e]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){n.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)}}(),function(){n.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var o={524:0};n.O.j=function(t){return 0===o[t]};var t=function(t,e){var r,a,i=e[0],s=e[1],u=e[2],l=0;if(i.some((function(t){return 0!==o[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(u)var c=u(n)}for(t&&t(e);l<i.length;l++)a=i[l],n.o(o,a)&&o[a]&&o[a][0](),o[a]=0;return n.O(c)},e=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];e.forEach(t.bind(null,0)),e.push=t.bind(null,e.push.bind(e))}();var e=n.O(void 0,[504],(function(){return n(2368)}));e=n.O(e)})();
//# sourceMappingURL=app.fe6c7304.js.map