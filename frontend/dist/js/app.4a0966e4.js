(function(){"use strict";var o={2959:function(o,e,t){var n=t(5130),a=t(6768);const r={id:"app"};function l(o,e){const t=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(t)])}var i=t(1241);const s={},u=(0,i.A)(s,[["render",l]]);var c=u,p=t(4373),d=t(973);const v={class:"map-container"},h={ref:"map",class:"map"};function m(o,e,t,n,r,l){return(0,a.uX)(),(0,a.CE)("div",v,[(0,a.Lk)("div",h,null,512)])}t(4114);var f=t(6886),g=t.n(f),k=t.p+"img/volcan.63713fbe.png",b=t.p+"img/volcan_eruption.b8beb67e.png",L={name:"MapComponent",data(){return{map:null,volcanoes:[]}},async mounted(){this.initMap(),window.addEventListener("resize",this.resizeMap)},methods:{initMap(){this.map=g().map(this.$refs.map).setView([0,0],4),g().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map),this.map.whenReady((()=>{this.loadVolcanoes()}))},async loadVolcanoes(){try{const o=await p.A.get("/api/volcanoes/");this.volcanoes=o.data,this.volcanoes.forEach((o=>{const e=this.getMarkerIcon(o.eruption_time),t=g().marker([o.latitude,o.longitude],{icon:e});t.bindTooltip(this.createPopupContent(o,o.id),{direction:"top",offset:[0,-20]}),t.on("click",(()=>this.onMarkerClick(o.id))),t.addTo(this.map)}))}catch(o){console.error("Error loading volcanoes:",o)}},onMarkerClick(o){this.$router.push(`/volcano/${o}`)},createPopupContent(o){let e=`\n        <b>${o.name}</b><br>\n        Location: ${o.location}<br>\n        Country: ${o.country}<br>\n        Height: ${o.height} meters<br>\n        Next Eruption: ${this.formatTimeToEruption(o.eruption_time)}\n      `;return e},formatTimeToEruption(o){const e=60,t=60*e,n=24*t,a=30*n,r=12*a;let l=o;const i=Math.floor(l/r);l%=r;const s=Math.floor(l/a);l%=a;const u=Math.floor(l/n);l%=n;const c=Math.floor(l/t);l%=t;const p=Math.floor(l/e),d=l%e;return`${i} years, ${s} months, ${u} days, ${c} hours, ${p} minutes, ${d} seconds`},getMarkerIcon(o){const e=2592e3;return o<e?g().icon({iconUrl:b,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]}):g().icon({iconUrl:k,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]})},resizeMap(){this.map&&this.map.invalidateSize()}},beforeUnmount(){this.map&&(this.map.remove(),this.map=null),window.removeEventListener("resize",this.resizeMap)}};const y=(0,i.A)(L,[["render",m],["__scopeId","data-v-7983ce2e"]]);var _=y,C=t.p+"img/volcan_eruption.aed783f5.gif",w=t(144);const E=o=>((0,a.Qi)("data-v-55a89dae"),o=o(),(0,a.jt)(),o),M={class:"header"},$=E((()=>(0,a.Lk)("h1",{class:"title"},[(0,a.Lk)("span",null,"VULCAN"),(0,a.Lk)("img",{src:C,alt:"Volcano GIF",class:"volcano-gif"}),(0,a.Lk)("span",null,"PREDICTION")],-1))),A={class:"header-nav"};var V={__name:"HeaderComponent",setup(o){const e=(0,d.rd)(),t=(0,w.KR)(!1),n=()=>{e.push("/register")},r=()=>{e.push("/login")},l=()=>{e.push("/profile")},i=()=>{localStorage.removeItem("auth_token"),window.location.reload()};return(0,a.sV)((()=>{const o=localStorage.getItem("auth_token");t.value=!!o})),(o,e)=>((0,a.uX)(),(0,a.CE)("header",M,[$,(0,a.Lk)("nav",A,[t.value?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:l,class:"button"},"Profile")):(0,a.Q3)("",!0),t.value?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:i,class:"button"},"Logout")):(0,a.Q3)("",!0),t.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:n,class:"button"},"Register")),t.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:r,class:"button"},"Login"))])]))}};const S=(0,i.A)(V,[["__scopeId","data-v-55a89dae"]]);var T=S;const X={id:"map-view"},P={class:"main-content"};var U={__name:"MapView",setup(o){return(o,e)=>((0,a.uX)(),(0,a.CE)("div",X,[(0,a.bF)(T),(0,a.Lk)("main",P,[(0,a.bF)(_)])]))}};const I=(0,i.A)(U,[["__scopeId","data-v-a05229a0"]]);var R=I;const O=(0,a.Lk)("button",{type:"submit"},"Login",-1);var F={__name:"LoginComponent",setup(o){const e=(0,d.rd)(),t=(0,w.KR)(""),r=(0,w.KR)(""),l=async()=>{try{const o=await p.A.post("api/auth/token/login/",{username:t.value,password:r.value}),n=o.data.auth_token;localStorage.setItem("auth_token",n),console.log("User logged in:",n),alert("Login successful!"),e.push("/")}catch(o){console.error("Login error:",o),alert("Login failed. Please check your credentials.")}};return(o,e)=>((0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("form",{onSubmit:(0,n.D$)(l,["prevent"])},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.value=o),placeholder:"Username",required:""},null,512),[[n.Jo,t.value]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o),placeholder:"Password",type:"password",required:""},null,512),[[n.Jo,r.value]]),O],32)]))}};const z=F;var j=z;const x=(0,a.Lk)("h1",null,"Login Page",-1);var D={__name:"LoginView",setup(o){const e=(0,d.rd)(),t=()=>{e.push("/register")};return(o,e)=>((0,a.uX)(),(0,a.CE)("div",null,[x,(0,a.bF)(j),(0,a.Lk)("button",{onClick:t},"Register Here")]))}};const K=D;var Q=K;const W=(0,a.Lk)("button",{type:"submit"},"Register",-1);var q={__name:"RegisterComponent",setup(o){const e=(0,d.rd)(),t=(0,w.KR)(""),r=(0,w.KR)(""),l=(0,w.KR)(""),i=async()=>{try{await p.A.post("api/auth/users/",{username:t.value,email:r.value,password:l.value}),alert("User registered successfully!"),e.push("/login")}catch(o){console.error("Registration error:",o),alert("Failed to register user.")}};return(o,e)=>((0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("form",{onSubmit:(0,n.D$)(i,["prevent"])},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.value=o),placeholder:"Username",required:""},null,512),[[n.Jo,t.value]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o),placeholder:"Email",type:"email",required:""},null,512),[[n.Jo,r.value]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.value=o),placeholder:"Password",type:"password",required:""},null,512),[[n.Jo,l.value]]),W],32)]))}};const J=q;var N=J;const G=(0,a.Lk)("h1",null,"Registration Page",-1);var H={__name:"RegisterView",setup(o){const e=(0,d.rd)(),t=()=>{e.push("/")},n=()=>{e.push("/login")};return(o,e)=>((0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[G,(0,a.bF)(N)]),(0,a.Lk)("div",null,[(0,a.Lk)("button",{onClick:t},"Go to Map"),(0,a.Lk)("button",{onClick:n},"Go to Login")])],64))}};const B=H;var Y=B,Z=t(4232);const oo=(0,a.Lk)("h2",null,"User Profile",-1),eo={key:0};function to(o,e,t,n,r,l){return(0,a.uX)(),(0,a.CE)("div",null,[oo,r.user?((0,a.uX)(),(0,a.CE)("div",eo,[(0,a.Lk)("p",null,"Username: "+(0,Z.v_)(r.user.username),1),(0,a.Lk)("p",null,"Email: "+(0,Z.v_)(r.user.email),1)])):(0,a.Q3)("",!0)])}var no={data(){return{user:null}},async mounted(){const o=localStorage.getItem("auth_token");if(o)try{const e=await p.A.get("api/auth/users/me/",{headers:{Authorization:`Token ${o}`}});this.user=e.data}catch(e){console.error("Error fetching user data:",e)}}};const ao=(0,i.A)(no,[["render",to]]);var ro=ao;const lo=(0,a.Lk)("h1",null,"Profile Page",-1);var io={__name:"UserProfileView",setup(o){const e=(0,d.rd)(),t=()=>{e.push("/")},n=()=>{localStorage.removeItem("auth_token"),e.push("/")};return(o,e)=>((0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[lo,(0,a.bF)(ro)]),(0,a.Lk)("div",null,[(0,a.Lk)("button",{onClick:t},"Go to Map"),(0,a.Lk)("button",{onClick:n},"Logout")])],64))}};const so=io;var uo=so;const co=o=>((0,a.Qi)("data-v-3ac8fbc1"),o=o(),(0,a.jt)(),o),po={key:0,class:"volcano-details"},vo=co((()=>(0,a.Lk)("strong",null,"Name:",-1))),ho=co((()=>(0,a.Lk)("strong",null,"Location:",-1))),mo=co((()=>(0,a.Lk)("strong",null,"Country:",-1))),fo=co((()=>(0,a.Lk)("strong",null,"Height:",-1))),go=co((()=>(0,a.Lk)("strong",null,"Next Eruption:",-1))),ko={key:1};function bo(o,e,t,n,r,l){const i=(0,a.g2)("router-link");return r.volcano?((0,a.uX)(),(0,a.CE)("div",po,[(0,a.Lk)("p",null,[vo,(0,a.eW)(" "+(0,Z.v_)(r.volcano.name),1)]),(0,a.Lk)("p",null,[ho,(0,a.eW)(" "+(0,Z.v_)(r.volcano.location),1)]),(0,a.Lk)("p",null,[mo,(0,a.eW)(" "+(0,Z.v_)(r.volcano.country),1)]),(0,a.Lk)("p",null,[fo,(0,a.eW)(" "+(0,Z.v_)(r.volcano.height)+" meters",1)]),(0,a.Lk)("p",null,[go,(0,a.eW)(" "+(0,Z.v_)(l.formatTimeToEruption(r.volcano.eruption_time)),1)]),(0,a.bF)(i,{to:"/"},{default:(0,a.k6)((()=>[(0,a.eW)("Back to Map")])),_:1})])):((0,a.uX)(),(0,a.CE)("div",ko," Loading volcano details... "))}var Lo={name:"VolcanoDetails",data(){return{volcano:null}},async mounted(){await this.loadVolcanoDetails()},methods:{async loadVolcanoDetails(){try{const o=this.$route.params.id,e=await p.A.get(`/api/volcanoes/${o}/`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.volcano=e.data}catch(o){console.error("Error loading volcano details:",o)}},formatTimeToEruption(o){const e=60,t=60*e,n=24*t,a=30*n,r=12*a;let l=o;const i=Math.floor(l/r);l%=r;const s=Math.floor(l/a);l%=a;const u=Math.floor(l/n);l%=n;const c=Math.floor(l/t);l%=t;const p=Math.floor(l/e),d=l%e;return`${i} years, ${s} months, ${u} days, ${c} hours, ${p} minutes, ${d} seconds`}}};const yo=(0,i.A)(Lo,[["render",bo],["__scopeId","data-v-3ac8fbc1"]]);var _o=yo;const Co=(0,a.Lk)("h1",null,"Volcano Details",-1);var wo={__name:"VolcanoDetailsView",setup(o){return(o,e)=>((0,a.uX)(),(0,a.CE)("div",null,[Co,(0,a.bF)(_o)]))}};const Eo=wo;var Mo=Eo;const $o=[{path:"/",component:R},{path:"/login",component:Q},{path:"/register",component:Y},{path:"/profile",component:uo},{path:"/volcano/:id",component:Mo}],Ao=(0,d.LA)(),Vo=(0,d.aE)({history:Ao,routes:$o});var So=Vo;p.A.defaults.baseURL="https://volcano-map.onrender.com";const To=localStorage.getItem("auth_token");To&&(p.A.defaults.headers.common["Authorization"]=`Token ${To}`);const Xo=(0,n.Ef)(c);Xo.use(So),Xo.mount("#app")}},e={};function t(n){var a=e[n];if(void 0!==a)return a.exports;var r=e[n]={exports:{}};return o[n].call(r.exports,r,r.exports,t),r.exports}t.m=o,function(){var o=[];t.O=function(e,n,a,r){if(!n){var l=1/0;for(c=0;c<o.length;c++){n=o[c][0],a=o[c][1],r=o[c][2];for(var i=!0,s=0;s<n.length;s++)(!1&r||l>=r)&&Object.keys(t.O).every((function(o){return t.O[o](n[s])}))?n.splice(s--,1):(i=!1,r<l&&(l=r));if(i){o.splice(c--,1);var u=a();void 0!==u&&(e=u)}}return e}r=r||0;for(var c=o.length;c>0&&o[c-1][2]>r;c--)o[c]=o[c-1];o[c]=[n,a,r]}}(),function(){t.n=function(o){var e=o&&o.__esModule?function(){return o["default"]}:function(){return o};return t.d(e,{a:e}),e}}(),function(){t.d=function(o,e){for(var n in e)t.o(e,n)&&!t.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:e[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){t.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)}}(),function(){t.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var o={524:0};t.O.j=function(e){return 0===o[e]};var e=function(e,n){var a,r,l=n[0],i=n[1],s=n[2],u=0;if(l.some((function(e){return 0!==o[e]}))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(s)var c=s(t)}for(e&&e(n);u<l.length;u++)r=l[u],t.o(o,r)&&o[r]&&o[r][0](),o[r]=0;return t.O(c)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(2959)}));n=t.O(n)})();
//# sourceMappingURL=app.4a0966e4.js.map